--// 🌌 BE HUB - Join Server Ít Người
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local PlaceId = game.PlaceId

local function GetSmallestServer()
	local servers = {}
	local cursor = ""
	repeat
		local response = game:HttpGet(
			"https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100&cursor="..cursor
		)
		local data = HttpService:JSONDecode(response)
		for _, server in ipairs(data.data) do
			if server.playing > 0 and server.playing < server.maxPlayers then
				table.insert(servers, server)
			end
		end
		cursor = data.nextPageCursor or ""
	until cursor == "" or not cursor

	if #servers > 0 then
		table.sort(servers, function(a, b)
			return a.playing < b.playing
		end)
		return servers[1].id
	end
end

local serverId = GetSmallestServer()
if serverId then
	game:GetService("StarterGui"):SetCore("SendNotification", {
		Title = "🌌 BE HUB";
		Text = "Đang vào server ít người nhất...";
		Duration = 5;
	})
	TeleportService:TeleportToPlaceInstance(PlaceId, serverId, game.Players.LocalPlayer)
else
	warn("Không tìm thấy server phù hợp.")
end
